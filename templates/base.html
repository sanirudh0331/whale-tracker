<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whale Tracker - {{ platform|title }}</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <style>
        .fade-in { animation: fadeIn 0.3s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
        .platform-toggle { transition: all 0.2s ease; }
        .platform-toggle.active { transform: scale(1.05); }
    </style>
</head>
<body class="bg-gray-900 text-gray-100 min-h-screen">
    <nav class="bg-gray-800 border-b border-gray-700 px-6 py-4">
        <div class="max-w-7xl mx-auto flex justify-between items-center">
            <div class="flex items-center gap-6">
                <h1 class="text-2xl font-bold">
                    <span class="text-blue-400">Whale</span> Tracker
                </h1>
                <!-- Platform Toggle -->
                <div class="flex bg-gray-700 rounded-lg p-1">
                    <a href="/?platform=kalshi"
                       class="platform-toggle px-4 py-2 rounded-md text-sm font-medium transition-colors
                              {% if platform == 'kalshi' %}bg-blue-600 text-white active{% else %}text-gray-300 hover:text-white{% endif %}">
                        Kalshi
                    </a>
                    <a href="/?platform=polymarket"
                       class="platform-toggle px-4 py-2 rounded-md text-sm font-medium transition-colors
                              {% if platform == 'polymarket' %}bg-purple-600 text-white active{% else %}text-gray-300 hover:text-white{% endif %}">
                        Polymarket
                    </a>
                </div>
            </div>
            <div class="flex items-center gap-4">
                <!-- Threshold Selector -->
                <div class="flex items-center gap-2">
                    <span class="text-sm text-gray-400">Min:</span>
                    <select id="threshold-select"
                            onchange="updateThreshold(this.value)"
                            class="bg-gray-700 text-gray-200 text-sm rounded px-2 py-1 border border-gray-600 focus:outline-none focus:border-blue-500">
                        {% if platform == 'kalshi' %}
                        <option value="100" {% if threshold == 100 %}selected{% endif %}>$100</option>
                        <option value="500" {% if threshold == 500 %}selected{% endif %}>$500</option>
                        <option value="1000" {% if threshold == 1000 %}selected{% endif %}>$1K</option>
                        <option value="2500" {% if threshold == 2500 %}selected{% endif %}>$2.5K</option>
                        <option value="5000" {% if threshold == 5000 %}selected{% endif %}>$5K</option>
                        <option value="10000" {% if threshold == 10000 %}selected{% endif %}>$10K</option>
                        {% else %}
                        <option value="10000" {% if threshold == 10000 %}selected{% endif %}>$10K</option>
                        <option value="25000" {% if threshold == 25000 %}selected{% endif %}>$25K</option>
                        <option value="50000" {% if threshold == 50000 %}selected{% endif %}>$50K</option>
                        <option value="100000" {% if threshold == 100000 %}selected{% endif %}>$100K</option>
                        <option value="250000" {% if threshold == 250000 %}selected{% endif %}>$250K</option>
                        <option value="500000" {% if threshold == 500000 %}selected{% endif %}>$500K</option>
                        {% endif %}
                    </select>
                </div>
                <span class="text-sm text-gray-500">|</span>
                <span class="text-sm text-gray-400">Auto-refresh: {{ refresh_seconds // 60 }}min</span>
            </div>
            <script>
                function updateThreshold(value) {
                    const url = new URL(window.location);
                    url.searchParams.set('threshold', value);
                    window.location = url.toString();
                }
            </script>
        </div>
    </nav>

    <main class="max-w-7xl mx-auto px-6 py-8">
        {% block content %}{% endblock %}
    </main>

    <footer class="text-center text-gray-500 text-sm py-8">
        Data updates every 5 minutes |
        Showing {% if platform == 'kalshi' %}Kalshi{% else %}Polymarket{% endif %} trades over ${{ "{:,}".format(threshold) }}
    </footer>
</body>
</html>
