<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Whale Tracker</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/htmx.org@1.9.10"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    colors: {
                        border: 'rgba(255, 255, 255, 0.08)',
                        'border-hover': 'rgba(255, 255, 255, 0.12)',
                    }
                }
            }
        }
    </script>
    <style>
        * { font-family: 'Inter', system-ui, sans-serif; }
        body { background: #000; }

        /* Subtle animations */
        .fade-in { animation: fadeIn 0.2s ease-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(4px); } to { opacity: 1; transform: translateY(0); } }

        /* Custom scrollbar */
        ::-webkit-scrollbar { width: 8px; height: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: rgba(255,255,255,0.1); border-radius: 4px; }
        ::-webkit-scrollbar-thumb:hover { background: rgba(255,255,255,0.15); }

        /* Segmented control */
        .segment-control { background: rgba(255,255,255,0.03); }
        .segment-btn { transition: all 0.15s ease; }
        .segment-btn.active { background: rgba(255,255,255,0.1); color: #fff; }
        .segment-btn:not(.active):hover { color: rgba(255,255,255,0.8); }

        /* Select styling */
        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='rgba(255,255,255,0.4)' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpath d='m6 9 6 6 6-6'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 8px center;
            padding-right: 28px;
            -webkit-appearance: none;
            appearance: none;
        }

        /* Card hover effect */
        .card {
            background: rgba(255,255,255,0.02);
            border: 1px solid rgba(255,255,255,0.06);
            transition: border-color 0.15s ease;
        }
        .card:hover { border-color: rgba(255,255,255,0.1); }

        /* Subtle gradient background */
        .gradient-bg {
            background: radial-gradient(ellipse 80% 50% at 50% -20%, rgba(120,119,198,0.1), transparent);
        }
    </style>
</head>
<body class="text-neutral-300 min-h-screen gradient-bg">
    <!-- Navigation -->
    <nav class="border-b border-white/[0.06] sticky top-0 z-50 backdrop-blur-xl bg-black/80">
        <div class="max-w-6xl mx-auto px-6 h-14 flex items-center justify-between">
            <!-- Logo & Platform Toggle -->
            <div class="flex items-center gap-6">
                <a href="/" class="text-white font-semibold text-[15px] tracking-tight">
                    Whale Tracker
                </a>

                <!-- Platform Segmented Control -->
                <div class="segment-control flex rounded-lg p-0.5">
                    <a href="/?platform=kalshi&threshold={{ threshold }}&hours={{ hours }}"
                       class="segment-btn px-3 py-1.5 rounded-md text-[13px] font-medium {% if platform == 'kalshi' %}active{% else %}text-neutral-500{% endif %}">
                        Kalshi
                    </a>
                    <a href="/?platform=polymarket&threshold={{ threshold }}&hours={{ hours }}"
                       class="segment-btn px-3 py-1.5 rounded-md text-[13px] font-medium {% if platform == 'polymarket' %}active{% else %}text-neutral-500{% endif %}">
                        Polymarket
                    </a>
                </div>
            </div>

            <!-- Filters -->
            <div class="flex items-center gap-4">
                <div class="flex items-center gap-2">
                    <span class="text-[12px] text-neutral-500 uppercase tracking-wide">Min</span>
                    <select id="threshold-select"
                            onchange="updateParam('threshold', this.value)"
                            class="bg-white/[0.03] text-neutral-300 text-[13px] rounded-lg px-3 py-1.5 border border-white/[0.06] focus:outline-none focus:border-white/[0.15] cursor-pointer">
                        {% if platform == 'kalshi' %}
                        <option value="100" {% if threshold == 100 %}selected{% endif %}>$100</option>
                        <option value="500" {% if threshold == 500 %}selected{% endif %}>$500</option>
                        <option value="1000" {% if threshold == 1000 %}selected{% endif %}>$1K</option>
                        <option value="2500" {% if threshold == 2500 %}selected{% endif %}>$2.5K</option>
                        <option value="5000" {% if threshold == 5000 %}selected{% endif %}>$5K</option>
                        <option value="10000" {% if threshold == 10000 %}selected{% endif %}>$10K</option>
                        {% else %}
                        <option value="10000" {% if threshold == 10000 %}selected{% endif %}>$10K</option>
                        <option value="25000" {% if threshold == 25000 %}selected{% endif %}>$25K</option>
                        <option value="50000" {% if threshold == 50000 %}selected{% endif %}>$50K</option>
                        <option value="100000" {% if threshold == 100000 %}selected{% endif %}>$100K</option>
                        <option value="250000" {% if threshold == 250000 %}selected{% endif %}>$250K</option>
                        <option value="500000" {% if threshold == 500000 %}selected{% endif %}>$500K</option>
                        {% endif %}
                    </select>
                </div>

                <div class="flex items-center gap-2">
                    <span class="text-[12px] text-neutral-500 uppercase tracking-wide">Period</span>
                    <select id="hours-select"
                            onchange="updateParam('hours', this.value)"
                            class="bg-white/[0.03] text-neutral-300 text-[13px] rounded-lg px-3 py-1.5 border border-white/[0.06] focus:outline-none focus:border-white/[0.15] cursor-pointer">
                        <option value="1" {% if hours == 1 %}selected{% endif %}>1h</option>
                        <option value="6" {% if hours == 6 %}selected{% endif %}>6h</option>
                        <option value="24" {% if hours == 24 %}selected{% endif %}>24h</option>
                        <option value="48" {% if hours == 48 %}selected{% endif %}>48h</option>
                        <option value="72" {% if hours == 72 %}selected{% endif %}>72h</option>
                        <option value="168" {% if hours == 168 %}selected{% endif %}>7d</option>
                    </select>
                </div>

                <!-- Live indicator -->
                <div class="flex items-center gap-1.5 text-[12px] text-neutral-500">
                    <span class="w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"></span>
                    Live
                </div>
            </div>
        </div>
    </nav>

    <script>
        function updateParam(param, value) {
            const url = new URL(window.location);
            url.searchParams.set(param, value);
            window.location = url.toString();
        }
    </script>

    <main class="max-w-6xl mx-auto px-6 py-8">
        {% block content %}{% endblock %}
    </main>

    <!-- Footer -->
    <footer class="border-t border-white/[0.06] mt-12">
        <div class="max-w-6xl mx-auto px-6 py-6 flex items-center justify-between text-[12px] text-neutral-600">
            <span>Auto-refresh every 5 min</span>
            <span>
                {% if platform == 'kalshi' %}Kalshi{% else %}Polymarket{% endif %} trades over ${{ "{:,}".format(threshold) }}
            </span>
        </div>
    </footer>
</body>
</html>
