{% if trades %}
<div class="divide-y divide-white/[0.04]">
    {% for trade in trades %}
    <div class="px-5 py-4 hover:bg-white/[0.02] transition-colors fade-in">
        {% if platform == 'kalshi' %}
        <!-- Kalshi trade format -->
        <div class="flex items-start justify-between gap-4">
            <div class="flex-1 min-w-0">
                <!-- Trade Direction & Amount -->
                <div class="flex items-center gap-2.5 mb-2">
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-[11px] font-medium
                                 {% if trade.taker_side == 'yes' %}
                                 bg-emerald-500/10 text-emerald-400
                                 {% else %}
                                 bg-rose-500/10 text-rose-400
                                 {% endif %}">
                        {{ trade.taker_side|upper }}
                    </span>
                    <span class="text-[15px] font-medium text-white">
                        ${{ "{:,.0f}".format(trade.usd_value) }}
                    </span>
                    {% if trade.insider_score is defined and trade.insider_score > 0 %}
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium
                                 {% if trade.insider_score >= 70 %}bg-rose-500/10 text-rose-400
                                 {% elif trade.insider_score >= 50 %}bg-amber-500/10 text-amber-400
                                 {% elif trade.insider_score >= 30 %}bg-yellow-500/10 text-yellow-400
                                 {% else %}bg-neutral-500/10 text-neutral-500{% endif %}"
                          title="Insider probability">
                        {{ "%.0f"|format(trade.insider_score) }}%
                    </span>
                    {% endif %}
                </div>

                <!-- Market Title -->
                <a href="https://kalshi.com/markets/{{ trade.ticker.split('-')[0]|lower }}"
                   target="_blank"
                   class="block text-[13px] text-neutral-400 hover:text-white transition-colors truncate">
                    {{ trade.market_title }}
                </a>
            </div>

            <!-- Metadata -->
            <div class="text-right flex-shrink-0">
                <div class="text-[11px] text-neutral-600">
                    {{ trade.timestamp|timestamp_to_relative }}
                </div>
                <div class="text-[11px] text-neutral-600 mt-1">
                    {{ "{:,}".format(trade.count) }} @ {{ trade.price }}c
                </div>
            </div>
        </div>
        {% else %}
        <!-- Polymarket market volume format -->
        <div class="flex items-start justify-between gap-4">
            <div class="flex-1 min-w-0">
                <!-- Trade Direction & Amount -->
                <div class="flex items-center gap-2.5 mb-2">
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-[11px] font-medium
                                 {% if 'YES' in trade.side and '@' in trade.side %}
                                 bg-emerald-500/10 text-emerald-400
                                 {% elif 'NO' in trade.side and '@' in trade.side %}
                                 bg-rose-500/10 text-rose-400
                                 {% else %}
                                 bg-violet-500/10 text-violet-400
                                 {% endif %}">
                        {{ trade.side.split('@')[0] if '@' in trade.side else trade.side }}
                    </span>
                    <span class="text-[15px] font-medium text-white">
                        ${{ "{:,.0f}".format(trade.size) }}
                    </span>
                    {% if trade.insider_score is defined and trade.insider_score > 0 %}
                    <span class="inline-flex items-center px-2 py-0.5 rounded text-[10px] font-medium
                                 {% if trade.insider_score >= 70 %}bg-rose-500/10 text-rose-400
                                 {% elif trade.insider_score >= 50 %}bg-amber-500/10 text-amber-400
                                 {% elif trade.insider_score >= 30 %}bg-yellow-500/10 text-yellow-400
                                 {% else %}bg-neutral-500/10 text-neutral-500{% endif %}"
                          title="Insider probability">
                        {{ "%.0f"|format(trade.insider_score) }}%
                    </span>
                    {% endif %}
                </div>

                <!-- Market Question -->
                {% if trade.slug %}
                <a href="https://polymarket.com/market/{{ trade.slug }}"
                   target="_blank"
                   class="block text-[13px] text-neutral-400 hover:text-white transition-colors truncate">
                    {{ trade.market_question }}
                </a>
                {% else %}
                <span class="block text-[13px] text-neutral-400 truncate">
                    {{ trade.market_question }}
                </span>
                {% endif %}
            </div>

            <!-- Metadata -->
            <div class="text-right flex-shrink-0">
                <div class="text-[11px] text-neutral-600">
                    {{ trade.timestamp|timestamp_to_relative }}
                </div>
                <div class="text-[11px] text-neutral-600 mt-1">
                    {{ "%.0f"|format(trade.price * 100) }}c
                </div>
            </div>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% else %}
<div class="p-12 text-center">
    <div class="text-neutral-600 text-[13px]">
        {% if insider_only %}
        No high-activity markets detected
        {% else %}
        No trades over ${{ "{:,}".format(threshold) }} yet
        {% endif %}
    </div>
</div>
{% endif %}
