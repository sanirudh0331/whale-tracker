{% if trades %}
<div class="divide-y divide-gray-700">
    {% for trade in trades %}
    <div class="p-4 hover:bg-gray-750 fade-in">
        {% if platform == 'kalshi' %}
        <!-- Kalshi trade format -->
        <div class="flex justify-between items-start mb-2">
            <div class="flex items-center gap-3">
                <span class="text-lg font-semibold {% if trade.taker_side == 'yes' %}text-green-400{% else %}text-red-400{% endif %}">
                    {{ trade.taker_side|upper }} ${{ "{:,.0f}".format(trade.usd_value) }}
                </span>
                <!-- Insider Score Badge -->
                {% if trade.insider_score is defined and trade.insider_score > 0 %}
                <span class="px-2 py-0.5 rounded-full text-xs font-medium {{ trade.insider_color }} bg-gray-700"
                      title="Insider probability based on size, timing, odds, and market type">
                    {{ "%.0f"|format(trade.insider_score) }}% {{ trade.insider_label }}
                </span>
                {% endif %}
            </div>
            <span class="text-xs text-gray-500">
                {{ trade.timestamp|timestamp_to_relative }}
            </span>
        </div>
        <div class="text-sm text-gray-300 mb-2">{{ trade.market_title|truncate(80) }}</div>
        <div class="flex justify-between items-center text-xs text-gray-500">
            <span class="font-mono bg-gray-700 px-2 py-0.5 rounded">{{ trade.ticker }}</span>
            <span>{{ "{:,}".format(trade.count) }} contracts @ {{ trade.price }}c</span>
        </div>
        {% else %}
        <!-- Polymarket market volume format -->
        <div class="flex justify-between items-start mb-2">
            <div class="flex items-center gap-3">
                <span class="text-lg font-semibold {% if 'YES' in trade.side and '@' in trade.side %}text-green-400{% elif 'NO' in trade.side and '@' in trade.side %}text-red-400{% else %}text-purple-400{% endif %}">
                    {{ trade.side }} ${{ "{:,.0f}".format(trade.size) }}
                </span>
                <!-- Insider Score Badge -->
                {% if trade.insider_score is defined and trade.insider_score > 0 %}
                <span class="px-2 py-0.5 rounded-full text-xs font-medium {{ trade.insider_color }} bg-gray-700"
                      title="Insider probability based on size, timing, odds, and market type">
                    {{ "%.0f"|format(trade.insider_score) }}% {{ trade.insider_label }}
                </span>
                {% endif %}
            </div>
            <span class="text-xs text-gray-500">
                {{ trade.timestamp|timestamp_to_relative }}
            </span>
        </div>
        <div class="text-sm text-gray-300 mb-2">
            {% if trade.slug %}
            <a href="https://polymarket.com/market/{{ trade.slug }}" target="_blank" class="hover:text-purple-400 hover:underline">
                {{ trade.market_question|truncate(80) }}
            </a>
            {% else %}
            {{ trade.market_question|truncate(80) }}
            {% endif %}
        </div>
        <div class="flex justify-between items-center text-xs text-gray-500">
            <span class="text-purple-400">Market Volume</span>
            <span>Price: {{ "%.0f"|format(trade.price * 100) }}Â¢</span>
        </div>
        {% endif %}
    </div>
    {% endfor %}
</div>
{% else %}
<div class="p-6 text-center text-gray-400">
    {% if insider_only %}
    No high activity markets yet...
    {% else %}
    No data yet. Waiting for markets over ${{ "{:,}".format(threshold) }} volume...
    {% endif %}
</div>
{% endif %}
